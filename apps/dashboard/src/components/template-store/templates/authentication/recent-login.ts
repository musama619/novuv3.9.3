import { StepTypeEnum, WorkflowCreationSourceEnum } from '@novu/shared';
import { WorkflowTemplate } from '../types';

export const recentLoginTemplate: WorkflowTemplate = {
  id: 'recent-login',
  name: 'Recent Login',
  description: 'Notify a user about a recent login from a new device',
  category: 'authentication',
  isPopular: false,
  workflowDefinition: {
    name: 'Recent Login',
    description: 'Notify a user about a recent login from a new device',
    workflowId: 'recent-login',
    steps: [
      {
        name: 'Email Step',
        type: StepTypeEnum.EMAIL,
        controlValues: {
          body: '{"type":"doc","content":[{"type":"section","attrs":{"borderRadius":0,"backgroundColor":"","align":"left","borderWidth":0,"borderColor":"","paddingTop":0,"paddingRight":0,"paddingBottom":0,"paddingLeft":0,"marginTop":0,"marginRight":0,"marginBottom":0,"marginLeft":0,"showIfKey":null},"content":[{"type":"image","attrs":{"src":"https://github.com/iampearceman/Design-assets/blob/main/emails/Colored%20Header%20-%20Email%20Header.png?raw=true","alt":null,"title":null,"width":654,"height":65.4,"alignment":"center","externalLink":null,"isExternalLinkVariable":false,"isSrcVariable":false,"showIfKey":null}},{"type":"spacer","attrs":{"height":16,"showIfKey":null}},{"type":"image","attrs":{"src":"https://github.com/iampearceman/Design-assets/blob/main/Acme%20Company%20Logo%20(Color).png?raw=true","alt":null,"title":null,"width":"144","height":41,"alignment":"left","externalLink":null,"isExternalLinkVariable":false,"isSrcVariable":false,"showIfKey":null}},{"type":"spacer","attrs":{"height":16,"showIfKey":null}},{"type":"image","attrs":{"src":"https://github.com/iampearceman/Design-assets/blob/main/emails/recent%20login%20-%20Email%20Header.png?raw=true","alt":null,"title":null,"width":"400","height":"160.15032679738562","alignment":"center","externalLink":null,"isExternalLinkVariable":false,"isSrcVariable":false,"showIfKey":null}},{"type":"spacer","attrs":{"height":16,"showIfKey":null}},{"type":"heading","attrs":{"textAlign":"center","level":1,"showIfKey":null},"content":[{"type":"text","text":"Review a recent login from a new device"}]},{"type":"spacer","attrs":{"height":16,"showIfKey":null}},{"type":"paragraph","attrs":{"textAlign":"left","showIfKey":null},"content":[{"type":"text","marks":[{"type":"textStyle","attrs":{"color":"rgb(102, 102, 102)"}}],"text":"There was a recent login to your "},{"type":"text","text":"Acme "},{"type":"text","marks":[{"type":"textStyle","attrs":{"color":"rgb(102, 102, 102)"}}],"text":"account. "},{"type":"text","text":"Please review the details:"}]},{"type":"spacer","attrs":{"height":32,"showIfKey":null}},{"type":"section","attrs":{"borderRadius":6,"backgroundColor":"#f7f7f7","align":"left","borderWidth":0,"borderColor":"#e2e2e2","paddingTop":12,"paddingRight":12,"paddingBottom":12,"paddingLeft":12,"marginTop":0,"marginRight":0,"marginBottom":0,"marginLeft":0,"showIfKey":null},"content":[{"type":"paragraph","attrs":{"textAlign":"left","showIfKey":null},"content":[{"type":"text","marks":[{"type":"textStyle","attrs":{"color":"#000000"}},{"type":"bold"}],"text":"Account: "},{"type":"variable","attrs":{"id":"subscriber.email | url_decode","label":null,"fallback":null,"required":false}}]},{"type":"paragraph","attrs":{"textAlign":"left","showIfKey":null},"content":[{"type":"text","marks":[{"type":"textStyle","attrs":{"color":"#000000"}},{"type":"bold"}],"text":"IP ("},{"type":"text","marks":[{"type":"bold"}],"text":"IPv6)"},{"type":"text","marks":[{"type":"textStyle","attrs":{"color":"#000000"}},{"type":"bold"}],"text":": "},{"type":"variable","attrs":{"id":"payload.event_attributes.http_request.client_ip | default: \'Unknown\'","label":null,"fallback":null,"required":false},"marks":[{"type":"textStyle","attrs":{"color":"#000000"}}]},{"type":"text","marks":[{"type":"textStyle","attrs":{"color":"#000000"}}],"text":" "}]},{"type":"paragraph","attrs":{"textAlign":"left","showIfKey":null},"content":[{"type":"text","marks":[{"type":"textStyle","attrs":{"color":""}},{"type":"bold"}],"text":"Agent"},{"type":"text","marks":[{"type":"textStyle","attrs":{"color":"#000000"}},{"type":"bold"}],"text":": "},{"type":"variable","attrs":{"id":"payload.event_attributes.http_request.user_agent | default: \'Unknown\'","label":null,"fallback":null,"required":false},"marks":[{"type":"textStyle","attrs":{"color":"#000000"}}]},{"type":"text","marks":[{"type":"textStyle","attrs":{"color":"#000000"}}],"text":" "}]},{"type":"paragraph","attrs":{"textAlign":"left","showIfKey":null},"content":[{"type":"text","marks":[{"type":"textStyle","attrs":{"color":"#000000"}},{"type":"bold"}],"text":"Time: "},{"type":"variable","attrs":{"id":"payload.timestamp | divided_by: 1000 | date: \'%A, %B %d, %Y, %H:%M:%S\'","label":null,"fallback":null,"required":false},"marks":[{"type":"textStyle","attrs":{"color":"#000000"}}]},{"type":"text","marks":[{"type":"textStyle","attrs":{"color":"#000000"}}],"text":" "}]}]},{"type":"spacer","attrs":{"height":32,"showIfKey":null}},{"type":"paragraph","attrs":{"textAlign":"left","showIfKey":null},"content":[{"type":"text","text":"If this was not you, reset your password now to protect your account and enroll in multifactor authentication in the \\""},{"type":"text","marks":[{"type":"bold"}],"text":"My Account"},{"type":"text","text":"\\" tab of \\""},{"type":"text","marks":[{"type":"bold"}],"text":"Settings & Members"},{"type":"text","text":"\\"."}]},{"type":"spacer","attrs":{"height":32,"showIfKey":null}},{"type":"button","attrs":{"text":"Go to my account","isTextVariable":false,"url":"https://dashboard-v2.novu.co","isUrlVariable":false,"alignment":"center","variant":"filled","borderRadius":"smooth","buttonColor":"#0abd9f","textColor":"#ffffff","showIfKey":null,"paddingTop":10,"paddingRight":32,"paddingBottom":10,"paddingLeft":32}},{"type":"paragraph","attrs":{"textAlign":"center","showIfKey":null},"content":[{"type":"text","text":"Questions? Contact us at "},{"type":"text","marks":[{"type":"link","attrs":{"href":"mailto:support@novu.co","target":"_blank","rel":"noopener noreferrer nofollow","class":"mly-no-underline","isUrlVariable":false}},{"type":"textStyle","attrs":{"color":"rgb(10, 189, 159)"}},{"type":"bold"}],"text":"support@acme.com"}]},{"type":"paragraph","attrs":{"textAlign":"left","showIfKey":null},"content":[{"type":"text","marks":[{"type":"textStyle","attrs":{"color":"rgb(34, 45, 56)"}}],"text":"Stay productive, "},{"type":"hardBreak","marks":[{"type":"textStyle","attrs":{"color":"rgb(34, 45, 56)"}}]},{"type":"text","marks":[{"type":"textStyle","attrs":{"color":"rgb(34, 45, 56)"}}],"text":"Acme Inc."}]},{"type":"image","attrs":{"src":"https://github.com/novuhq/blog/blob/main/media-assets/yelp-footer.png?raw=true","alt":null,"title":null,"width":654,"height":65.19938650306749,"alignment":"center","externalLink":null,"isExternalLinkVariable":false,"isSrcVariable":false,"showIfKey":null}},{"type":"paragraph","attrs":{"textAlign":"left","showIfKey":null},"content":[{"type":"text","marks":[{"type":"textStyle","attrs":{"color":"rgb(34, 45, 56)"}}],"text":"Â© 2025 | Acme Inc., 350 Mission Street, San Francisco, CA 94105, U.S.A. | "},{"type":"text","marks":[{"type":"link","attrs":{"href":"http://www.yelp.com","target":"_blank","rel":"noopener noreferrer nofollow","class":"mly-no-underline","isUrlVariable":false}},{"type":"textStyle","attrs":{"color":"rgb(10, 189, 159)"}}],"text":"www.acme.com"}]},{"type":"spacer","attrs":{"height":16,"showIfKey":null}}]},{"type":"image","attrs":{"src":"https://github.com/iampearceman/Design-assets/blob/main/emails/Colored%20Footer%20-%20Email%20Footer.png?raw=true","alt":null,"title":null,"width":654,"height":65.4,"alignment":"center","externalLink":null,"isExternalLinkVariable":false,"isSrcVariable":false,"showIfKey":null}},{"type":"paragraph","attrs":{"textAlign":"left","showIfKey":null}}]}',
          subject: 'A new device logged into your account',
        },
      },
    ],
    tags: [],
    active: true,
    __source: WorkflowCreationSourceEnum.TEMPLATE_STORE,
  },
};
