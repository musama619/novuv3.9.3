import { StepTypeEnum, WorkflowCreationSourceEnum } from '@novu/shared';
import { WorkflowTemplate } from '../types';

export const sendingInvoiceTemplate: WorkflowTemplate = {
  id: 'sending-invoice',
  name: 'Sending Invoice',
  description: 'Send an invoice to a customer',
  category: 'billing',
  isPopular: false,
  workflowDefinition: {
    name: 'Sending Invoice',
    description: 'Send an invoice to a customer',
    workflowId: 'sending-invoice',
    steps: [
      {
        name: 'In-App Step',
        type: StepTypeEnum.IN_APP,
        controlValues: {
          body: '**Your Invoice is ready**',
          avatar: 'https://dashboard-v2.novu.co/images/info-2.svg',
          subject: '',
          primaryAction: {
            label: 'View your invoice',
            redirect: {
              target: '_self',
              url: '',
            },
          },
          redirect: {
            url: '{{payload.object.hosted_invoice_url}}',
            target: '_self',
          },
          disableOutputSanitization: false,
        },
      },
      {
        name: 'Email Step',
        type: StepTypeEnum.EMAIL,
        controlValues: {
          body: '{"type":"doc","content":[{"type":"section","attrs":{"borderRadius":0,"backgroundColor":"","align":"left","borderWidth":0,"borderColor":"","paddingTop":0,"paddingRight":0,"paddingBottom":0,"paddingLeft":0,"marginTop":0,"marginRight":0,"marginBottom":0,"marginLeft":0,"showIfKey":null},"content":[{"type":"image","attrs":{"src":"https://github.com/iampearceman/Design-assets/blob/main/emails/Colored%20Header%20-%20Email%20Header.png?raw=true","alt":null,"title":null,"width":654,"height":65.4,"alignment":"center","externalLink":null,"isExternalLinkVariable":false,"isSrcVariable":false,"showIfKey":null}},{"type":"spacer","attrs":{"height":"md","showIfKey":null}},{"type":"image","attrs":{"src":"https://github.com/iampearceman/Design-assets/blob/main/Acme%20Company%20Logo%20(Color).png?raw=true","alt":null,"title":null,"width":200,"height":41,"alignment":"left","externalLink":null,"isExternalLinkVariable":false,"isSrcVariable":false,"showIfKey":null}},{"type":"spacer","attrs":{"height":"md","showIfKey":null}},{"type":"image","attrs":{"src":"https://github.com/iampearceman/Design-assets/blob/main/emails/Invoice%20-%20Email%20Header.png?raw=true","alt":null,"title":null,"width":500,"height":200,"alignment":"center","externalLink":null,"isExternalLinkVariable":false,"isSrcVariable":false,"showIfKey":null}},{"type":"spacer","attrs":{"height":"md","showIfKey":null}},{"type":"heading","attrs":{"textAlign":"center","level":2,"showIfKey":null},"content":[{"type":"text","text":"Your Invoice from Acme Inc."}]},{"type":"spacer","attrs":{"height":"xl","showIfKey":null}},{"type":"paragraph","attrs":{"textAlign":"left","showIfKey":null},"content":[{"type":"text","text":"Your latest invoice from Acme Inc. is now available. Below, you\'ll find the details of your billing period, payment amount, and invoice summary. If you have any questions, feel free to reach out—we\'re happy to help."}]},{"type":"spacer","attrs":{"height":"xl","showIfKey":null}},{"type":"section","attrs":{"borderRadius":6,"backgroundColor":"#f8f8f8","align":"left","borderWidth":0,"borderColor":"#e2e2e2","paddingTop":12,"paddingRight":12,"paddingBottom":12,"paddingLeft":12,"marginTop":0,"marginRight":0,"marginBottom":0,"marginLeft":0,"showIfKey":null},"content":[{"type":"heading","attrs":{"textAlign":"left","level":3,"showIfKey":null},"content":[{"type":"text","marks":[{"type":"textStyle","attrs":{"color":"#000000"}}],"text":"Payment details"}]},{"type":"columns","attrs":{"showIfKey":null,"gap":8},"content":[{"type":"column","attrs":{"columnId":"ea32fff0-4131-440e-810b-ee5dfe99f4cf","width":"30","verticalAlign":"top"},"content":[{"type":"paragraph","attrs":{"textAlign":"left","showIfKey":null},"content":[{"type":"text","marks":[{"type":"bold"}],"text":"Customer"},{"type":"hardBreak"},{"type":"text","marks":[{"type":"bold"}],"text":"Invoice Number"},{"type":"hardBreak"},{"type":"text","marks":[{"type":"bold"}],"text":"Invoice Date:"}]}]},{"type":"column","attrs":{"columnId":"cb833b8f-2a45-422f-b7f3-e4b38c786008","width":"auto","verticalAlign":"top"},"content":[{"type":"paragraph","attrs":{"textAlign":"right","showIfKey":null},"content":[{"type":"variable","attrs":{"id":"payload.object.customer_name","label":null,"fallback":null,"required":false}},{"type":"text","text":" "},{"type":"hardBreak"},{"type":"variable","attrs":{"id":"payload.object.number","label":null,"fallback":null,"required":false}},{"type":"hardBreak"},{"type":"variable","attrs":{"id":"payload.object.created","label":null,"fallback":null,"required":false}}]}]}]},{"type":"horizontalRule"},{"type":"repeat","attrs":{"each":"payload.object.lines.data","isUpdatingKey":false,"showIfKey":null},"content":[{"type":"paragraph","attrs":{"textAlign":"left","showIfKey":null},"content":[{"type":"text","marks":[{"type":"bold"}],"text":"Description: "},{"type":"variable","attrs":{"id":"payload.object.lines.data.description | split: \'Novu \' | last","label":null,"fallback":null,"required":true}},{"type":"hardBreak"},{"type":"text","marks":[{"type":"bold"}],"text":"Period: "},{"type":"variable","attrs":{"id":"payload.object.lines.data.period.start | date: \'%b %d, %Y\'","label":null,"fallback":null,"required":true}},{"type":"text","text":" - "},{"type":"variable","attrs":{"id":"payload.object.lines.data.period.end | date: \'%b %d, %Y\'","label":null,"fallback":null,"required":true}},{"type":"hardBreak"},{"type":"text","marks":[{"type":"bold"}],"text":"Quantity: "},{"type":"variable","attrs":{"id":"payload.object.lines.data.quantity","label":null,"fallback":null,"required":true}},{"type":"hardBreak"},{"type":"text","marks":[{"type":"bold"}],"text":"Amount: "},{"type":"variable","attrs":{"id":"payload.object.lines.data.amount | divided_by: 100 | prepend: \'$\'","label":null,"fallback":null,"required":true}}]},{"type":"horizontalRule"}]},{"type":"columns","attrs":{"showIfKey":null,"gap":8},"content":[{"type":"column","attrs":{"columnId":"779a1b07-a547-4fbd-87a0-161afe7121b5","width":"60","verticalAlign":"top"},"content":[{"type":"paragraph","attrs":{"textAlign":"left","showIfKey":null}}]},{"type":"column","attrs":{"columnId":"b2925410-daee-4912-9a34-b2dae43d403a","width":"auto","verticalAlign":"top"},"content":[{"type":"paragraph","attrs":{"textAlign":"left","showIfKey":null},"content":[{"type":"text","marks":[{"type":"bold"}],"text":"Subtotal"},{"type":"hardBreak","marks":[{"type":"bold"}]},{"type":"text","marks":[{"type":"bold"}],"text":"Total"},{"type":"hardBreak","marks":[{"type":"bold"}]}]}]},{"type":"column","attrs":{"columnId":"f232c693-0a40-4409-b8aa-44cc846ebb3a","width":"auto","verticalAlign":"top"},"content":[{"type":"paragraph","attrs":{"textAlign":"right","showIfKey":null},"content":[{"type":"variable","attrs":{"id":"payload.object.subtotal | divided_by: 100 | prepend: \'$\'","label":null,"fallback":null,"required":false}},{"type":"hardBreak"},{"type":"variable","attrs":{"id":"payload.object.subtotal | divided_by: 100 | prepend: \'$\'","label":null,"fallback":null,"required":false}},{"type":"text","marks":[{"type":"bold"}],"text":" "}]}]}]},{"type":"spacer","attrs":{"height":"lg","showIfKey":null}},{"type":"button","attrs":{"text":"View your invoice","isTextVariable":false,"url":"payload.object.hosted_invoice_url","isUrlVariable":true,"alignment":"center","variant":"filled","borderRadius":"smooth","buttonColor":"#0abd9f","textColor":"#ffffff","showIfKey":null,"paddingTop":10,"paddingRight":32,"paddingBottom":10,"paddingLeft":32}},{"type":"horizontalRule"},{"type":"section","attrs":{"borderRadius":6,"backgroundColor":"","align":"center","borderWidth":0,"borderColor":"","paddingTop":0,"paddingRight":0,"paddingBottom":0,"paddingLeft":0,"marginTop":0,"marginRight":0,"marginBottom":0,"marginLeft":0,"showIfKey":null},"content":[{"type":"paragraph","attrs":{"textAlign":"center","showIfKey":null},"content":[{"type":"text","marks":[{"type":"textStyle","attrs":{"color":"#000000"}}],"text":"Questions? Contact us at "},{"type":"text","marks":[{"type":"link","attrs":{"href":"mailto:support@novu.co","target":"_blank","rel":"noopener noreferrer nofollow","class":"mly-no-underline","isUrlVariable":false}},{"type":"textStyle","attrs":{"color":"#0abd9f"}},{"type":"bold"}],"text":"support@acme.com"}]}]}]},{"type":"spacer","attrs":{"height":"xl","showIfKey":null}},{"type":"paragraph","attrs":{"textAlign":"left","showIfKey":null},"content":[{"type":"text","marks":[{"type":"textStyle","attrs":{"color":"rgb(34, 45, 56)"}}],"text":"Stay productive,"},{"type":"hardBreak","marks":[{"type":"textStyle","attrs":{"color":"rgb(34, 45, 56)"}}]},{"type":"text","marks":[{"type":"textStyle","attrs":{"color":"rgb(34, 45, 56)"}}],"text":"Acme Inc."}]},{"type":"image","attrs":{"src":"https://github.com/novuhq/blog/blob/main/media-assets/yelp-footer.png?raw=true","alt":null,"title":null,"width":654,"height":65.19938650306749,"alignment":"center","externalLink":null,"isExternalLinkVariable":false,"isSrcVariable":false,"showIfKey":null}},{"type":"paragraph","attrs":{"textAlign":"left","showIfKey":null},"content":[{"type":"text","marks":[{"type":"textStyle","attrs":{"color":"rgb(34, 45, 56)"}}],"text":"© 2025 | Acme Inc., 350 Mission Street, San Francisco, CA 94105, U.S.A. | "},{"type":"text","marks":[{"type":"link","attrs":{"href":"http://www.yelp.com","target":"_blank","rel":"noopener noreferrer nofollow","class":"mly-no-underline","isUrlVariable":false}},{"type":"textStyle","attrs":{"color":"rgb(10, 189, 159)"}}],"text":"www.acme.com"}]},{"type":"spacer","attrs":{"height":"md","showIfKey":null}}]},{"type":"image","attrs":{"src":"https://github.com/iampearceman/Design-assets/blob/main/emails/Colored%20Footer%20-%20Email%20Footer.png?raw=true","alt":null,"title":null,"width":654,"height":65.4,"alignment":"center","externalLink":null,"isExternalLinkVariable":false,"isSrcVariable":false,"showIfKey":null}},{"type":"paragraph","attrs":{"textAlign":"left","showIfKey":null}}]}',
          subject: 'Your Invoice from Acme Inc.',
        },
      },
    ],
    tags: [],
    active: true,
    __source: WorkflowCreationSourceEnum.TEMPLATE_STORE,
  },
};
