import { ApiProperty, ApiPropertyOptional } from '@nestjs/swagger';
import { ChannelSettingsDto } from './channelSettingsDto';

export class SubscriberResponseDtoOptional {
  @ApiPropertyOptional({
    description:
      'The internal ID generated by Novu for your subscriber. ' +
      'This ID does not match the `subscriberId` used in your queries. Refer to `subscriberId` for that identifier.',
    type: String,
  })
  _id?: string;

  @ApiProperty({
    description: 'The first name of the subscriber.',
    type: String,
    nullable: true,
  })
  firstName?: string | null;

  @ApiProperty({
    description: 'The last name of the subscriber.',
    type: String,
    nullable: true,
  })
  lastName?: string | null;

  @ApiPropertyOptional({
    description: 'The email address of the subscriber.',
    type: String,
    nullable: true,
  })
  email?: string | null;

  @ApiPropertyOptional({
    description: 'The phone number of the subscriber.',
    type: String,
    nullable: true,
  })
  phone?: string | null;

  @ApiPropertyOptional({
    description: "The URL of the subscriber's avatar image.",
    type: String,
    nullable: true,
  })
  avatar?: string | null;

  @ApiPropertyOptional({
    description: 'The locale setting of the subscriber, indicating their preferred language or region.',
    type: String,
    nullable: true,
  })
  locale?: string | null;

  @ApiPropertyOptional({
    type: [ChannelSettingsDto],
    description: 'An array of channel settings associated with the subscriber.',
  })
  channels?: ChannelSettingsDto[];

  @ApiPropertyOptional({
    description: 'An array of topics that the subscriber is subscribed to.',
    type: [String],
    deprecated: true,
  })
  topics?: string[];

  @ApiProperty({
    description: 'Indicates whether the subscriber is currently online.',
    type: Boolean,
    nullable: true,
  })
  isOnline?: boolean | null;

  @ApiProperty({
    description: 'The timestamp indicating when the subscriber was last online, in ISO 8601 format.',
    type: String,
    nullable: true,
  })
  lastOnlineAt?: string | null;

  @ApiPropertyOptional({
    description: 'The version of the subscriber document.',
    type: Number,
  })
  __v?: number;

  @ApiPropertyOptional({
    type: 'object',
    description: 'Additional custom data for the subscriber',
    additionalProperties: true,
    nullable: true,
  })
  data?: Record<string, unknown> | null;

  @ApiPropertyOptional({
    description: 'Timezone of the subscriber',
    type: String,
    nullable: true,
  })
  timezone?: string | null;
}

export class SubscriberResponseDto extends SubscriberResponseDtoOptional {
  @ApiProperty({
    description:
      'The identifier used to create this subscriber, which typically corresponds to the user ID in your system.',
    type: String,
  })
  subscriberId: string;

  @ApiProperty({
    description: 'The unique identifier of the organization to which the subscriber belongs.',
    type: String,
  })
  _organizationId: string;

  @ApiProperty({
    description: 'The unique identifier of the environment associated with this subscriber.',
    type: String,
  })
  _environmentId: string;

  @ApiProperty({
    description: 'Indicates whether the subscriber has been deleted.',
    type: Boolean,
  })
  deleted: boolean;

  @ApiProperty({
    description: 'The timestamp indicating when the subscriber was created, in ISO 8601 format.',
    type: String,
  })
  createdAt: string;

  @ApiProperty({
    description: 'The timestamp indicating when the subscriber was last updated, in ISO 8601 format.',
    type: String,
  })
  updatedAt: string;
}
