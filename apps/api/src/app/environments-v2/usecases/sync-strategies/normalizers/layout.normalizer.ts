import { Injectable } from '@nestjs/common';
import { LayoutResponseDto } from '../../../../layouts-v2/dtos';
import { INormalizedLayout } from '../types/layout-sync.types';

@Injectable()
export class LayoutNormalizer {
  /**
   * We want to normalize the layout and omit any fields that are autogenerated by the system
   * Or are not relevant for the comparison
   */
  normalizeLayout(layout: LayoutResponseDto): INormalizedLayout {
    const { _id, updatedAt, updatedBy, createdAt, slug, isDefault, origin, type, variables, ...normalizedLayout } =
      layout;

    return {
      ...normalizedLayout,
    };
  }
}
